(function(e){window.vcc_label_copy="Copy";window.vcc_label_copy_plus="Copy+";window.vcc_label_paste="Paste";e(document).on("mouseover","#visual_composer_content",function(){e("div.controls_row").on("mouseenter",function(){if(e(this).find(".vc_clipboard").length==0){window.vcc_cb_count=localStorage.getItem("vcc_cb_count");if(window.vcc_cb_count===null)window.vcc_cb_count=0;e(this).append('<div class="vc_clipboard" style="font-size:13px !important;"><span class="vcc_copy" title="Copy this row">'+window.vcc_label_copy+'</span> | <span class="vcc_copy_plus" title="Add to clipboard stack">'+window.vcc_label_copy_plus+'</span> | <span class="vcc_paste" title="Paste after this row">'+window.vcc_label_paste+'</span> | <span class="vcc_number_reset" title="Click to clear clipboard">'+window.vcc_cb_count+"</span></div>");h=e(this).height();if(h>22){e("div.vc_clipboard").css("line-height",h+"px")}c()}});e("div.controls_row").on("mouseleave",function(){e(this).find(".vc_clipboard").remove()});e(".wpb_vc_column > .controls:first-child, .wpb_vc_column > .vc_controls:first-child").on("mouseenter",function(){if(e(this).find(".vc_clipboard_col").length==0){window.vcc_cb_count=localStorage.getItem("vcc_cb_count");if(window.vcc_cb_count===null)window.vcc_cb_count=0;e(this).append('<span class="vc_clipboard_col"><span class="vcc_copy vcc_col" title="Copy content of this column">'+window.vcc_label_copy+'</span> | <span class="vcc_paste" title="Paste inside this column">'+window.vcc_label_paste+'</span> | <span class="vcc_number_reset" title="Click to clear clipboard">'+window.vcc_cb_count+"</span></span>");h=e(this).height();c()}});e(".wpb_vc_column .controls, .wpb_vc_column .vc_controls").on("mouseleave",function(){e(this).find(".vc_clipboard_col").remove()});e("#visual_composer_content").on("mouseenter",".wpb_column_container > div",function(){var t=e(this).find(".vc_controls > div");if(t.find(".vcc_copy").length==0&&e(this).closest("div[data-element_type]").attr("data-model-id")!=undefined){window.vcc_cb_count=localStorage.getItem("vcc_cb_count");if(window.vcc_cb_count===null)window.vcc_cb_count=0;t.append('<span class="vc_element-name vc_clipboard_element_root"><span class="vc_btn-content vc_clipboard_element"><span class="vcc_copy" title="Copy this element">C</span> | <span class="vcc_copy_plus" title="Add to clipboard stack">C+</span> | <span class="vcc_paste" title="Paste after this element">P</span> | <span class="vcc_number_reset" title="Click to clear clipboard">'+window.vcc_cb_count+"</span></span></span>");c()}});e("#visual_composer_content").on("mouseleave",".wpb_column_container > div",function(){e(this).find(".vc_clipboard_element_root").remove()})});e(document).ready(function(){setTimeout(function(){if(e(".vcc_paste_top").length==0){t()}},200)});e(window).load(function(){setTimeout(function(){if(e(".vcc_paste_top").length==0){t()}},200)});var c=function(){e(".vcc_copy").on("click",function(){if(window.vcc_cb_count>1){for(var c=2;c<=window.vcc_cb_count;c++){localStorage.removeItem("vcc_element_sc"+c);localStorage.removeItem("vcc_element_params"+c);localStorage.removeItem("vcc_elements"+c)}}id=e(this).closest("div[data-element_type]").attr("data-model-id");model=window.vc.app.views[id].model;shortcode=model.get("shortcode");window.vcc_elements=[];localStorage.setItem("vcc_element_sc1",shortcode);localStorage.setItem("vcc_element_params1",JSON.stringify(model.get("params")));_.each(window.vc.shortcodes.where({parent_id:model.id}),function(e){n(e,0)});localStorage.setItem("vcc_elements1",JSON.stringify(window.vcc_elements));localStorage.setItem("vcc_cb_count","1");e("span.vcc_number_reset").html("1");e(".vcc_number_reset_top").html("1");window.vcc_cb_count=1});e(".vcc_copy_plus").on("click",function(){i=parseInt(window.vcc_cb_count)+1;id=e(this).closest("div[data-element_type]").attr("data-model-id");model=window.vc.app.views[id].model;shortcode=model.get("shortcode");var c=localStorage.getItem("vcc_element_sc1");if(shortcode=="vc_row"&&c!="vc_row"||shortcode!="vc_row"&&c=="vc_row"||shortcode=="vc_column"&&c!="vc_column"||shortcode!="vc_column"&&c=="vc_column"){alert("Can't mix "+shortcode+" with "+c+"!");return}window.vcc_elements=[];localStorage.setItem("vcc_element_sc"+i,shortcode);localStorage.setItem("vcc_element_params"+i,JSON.stringify(model.get("params")));_.each(window.vc.shortcodes.where({parent_id:model.id}),function(e){n(e,0)});localStorage.setItem("vcc_elements"+i,JSON.stringify(window.vcc_elements));window.vcc_cb_count++;localStorage.setItem("vcc_cb_count",""+window.vcc_cb_count);e("span.vcc_number_reset").html(window.vcc_cb_count);e(".vcc_number_reset_top").html(window.vcc_cb_count)});e(".vcc_paste").on("click",function(){var c=-1;if(r(this)){window.vcc_total_count=0;window.vcc_current_count=0;var t=e(this).closest("div[data-element_type]");e("#vcc_paste_indicator").show();setTimeout(function(){for(var o=1;o<=window.vcc_cb_count;o++){vcc_elements=JSON.parse(localStorage.getItem("vcc_elements"+o));window.vcc_total_count+=vcc_elements.length}window.vcc_total_count=window.vcc_total_count+parseInt(window.vcc_cb_count);for(var o=1;o<=window.vcc_cb_count;o++){c=v(t,o,c)}e("#vcc_paste_indicator").hide()},100)}});e(".vcc_number_reset").on("click",function(){l()})};var t=function(){window.vcc_cb_count=localStorage.getItem("vcc_cb_count");if(window.vcc_cb_count===null)window.vcc_cb_count=0;if(e(".composer-switch").length==0&&e("#wpb_visual_composer").length>0&&e("#wpb_visual_composer").is(":visible")){e("#titlediv").after('<div class="composer-switch"></div>')}e(".composer-switch").append(' <span id="vcc_toolbar"><span id="vcc_toolbar_paste"><a href="#" class="vcc_paste_top" title="Paste">PASTE</a><span class="vc_spacer vc-spacer"></span><a href="#" class="vcc_number_reset_top" title="Click to clear clipboard">'+window.vcc_cb_count+'</a></span> <span id="vcc_toolbar_impex"><a href="#" class="vcc_export" title="Export">EXPORT</a> <input type="text" class="vcc_input"> <a href="#" class="vcc_import" title="Import">IMPORT</a></span> '+'<span id="vcc_toolbar_gc_load" class="vcc_container"><a href="#" class="vcc_gc_load" title="Load from Google Cloud">GC LOAD</a>'+'<div class="vcc_load_dialog vcc_dialog"><div class="vcc_list"></div>'+'<img class="vcc_loader" src="'+window.bt_vcc_plugins_url+'/vc_clipboard/ajax-loader.gif"></span></div></span> '+'<span id="vcc_toolbar_gc_save" class="vcc_container"><a href="#" class="vcc_gc_save" title="Save to Google Cloud">GC SAVE</a>'+'<div class="vcc_save_dialog vcc_dialog">Name:<br><input type="text" id="vcc_name"><br><span class="vcc_dialog_buttons"><a href="#" class="vcc_save_submit" title="Submit">SUBMIT</a> <a href="#" class="vcc_save_cancel" title="Cancel">CANCEL</a><img class="vcc_loader" src="'+window.bt_vcc_plugins_url+'/vc_clipboard/ajax-loader.gif"></span></div></span> '+'<span id="vcc_toolbar_license" class="vcc_container"><a href="#" class="vcc_gc_settings" title="Activate product license">LICENSE</a>'+'<div class="vcc_activate_dialog vcc_dialog"><div>A valid license key qualifies you for support and enables Google Cloud template manager. A license key may only be used for one Visual Composer Clipboard installation on one WordPress site at a time. If you have activated your license key on another site, then you should <a href="http://codecanyon.net/item/visual-composer-clipboard/8897711" class="vcc_obtain">obtain new license key</a>.</div>Envato username:<br><input type="text" id="vcc_username"><br>Envato API key:<br><input type="text" id="vcc_api_key"><br>License key:<br><input type="text" id="vcc_license_key"><br><span class="vcc_dialog_buttons"><a href="#" class="vcc_gc_settings_submit" title="Submit">SUBMIT</a> <a href="#" class="vcc_gc_settings_cancel" title="Cancel">CANCEL</a><img class="vcc_loader" src="'+window.bt_vcc_plugins_url+'/vc_clipboard/ajax-loader.gif"></span></div></span> '+'<span class="vcc_container"><a href="#" class="vcc_prefs" title="Visual Composer Clipboard Preferences">VCC PREFS</a>'+'<div class="vcc_prefs_dialog vcc_dialog"><input id="vcc_prefs_short" type="checkbox"><label for="vcc_prefs_short">Short Commands</label><br><input id="vcc_prefs_toolbar" type="checkbox"><label for="vcc_prefs_toolbar">Toolbar Initially Closed</label><br><input id="vcc_prefs_paste" type="checkbox"><label for="vcc_prefs_paste">Hide Paste Button</label><br><input id="vcc_prefs_impex" type="checkbox"><label for="vcc_prefs_impex">Hide Export/Import</label><br><input id="vcc_prefs_gc" type="checkbox"><label for="vcc_prefs_gc">Hide GC Buttons</label><br><input id="vcc_prefs_license" type="checkbox"><label for="vcc_prefs_license">Hide License Button</label></div></span>'+'</span><span class="vcc_oc_button o"></span><div id="vcc_paste_indicator">Pasting, please wait...</span></div>');if(localStorage.getItem("vcc_prefs_short")=="1"&&e("#vcc_prefs_short").length>0){e("#vcc_prefs_short")[0].checked=true;window.vcc_label_copy="C";window.vcc_label_copy_plus="C+";window.vcc_label_paste="P"}if(localStorage.getItem("vcc_prefs_toolbar")=="1"&&e("#vcc_prefs_toolbar").length>0){e("#vcc_prefs_toolbar")[0].checked=true;e(".vcc_oc_button").removeClass("o");e(".vcc_oc_button").addClass("c");e("#vcc_toolbar").hide()}if(localStorage.getItem("vcc_prefs_paste")=="1"&&e("#vcc_prefs_paste").length>0){e("#vcc_prefs_paste")[0].checked=true;e("#vcc_toolbar_paste").hide()}if(localStorage.getItem("vcc_prefs_impex")=="1"&&e("#vcc_prefs_impex").length>0){e("#vcc_prefs_impex")[0].checked=true;e("#vcc_toolbar_impex").hide()}if(localStorage.getItem("vcc_prefs_gc")=="1"&&e("#vcc_prefs_gc").length>0){e("#vcc_prefs_gc")[0].checked=true;e("#vcc_toolbar_gc_load").hide();e("#vcc_toolbar_gc_save").hide()}if(localStorage.getItem("vcc_prefs_license")=="1"&&e("#vcc_prefs_license").length>0){e("#vcc_prefs_license")[0].checked=true;e("#vcc_toolbar_license").hide()}e("#vcc_prefs_short").on("change",function(e){if(this.checked){localStorage.setItem("vcc_prefs_short","1");window.vcc_label_copy="C";window.vcc_label_copy_plus="C+";window.vcc_label_paste="P"}else{localStorage.setItem("vcc_prefs_short","0");window.vcc_label_copy="Copy";window.vcc_label_copy_plus="Copy+";window.vcc_label_paste="Paste"}});e("#vcc_prefs_toolbar").on("change",function(e){if(this.checked){localStorage.setItem("vcc_prefs_toolbar","1")}else{localStorage.setItem("vcc_prefs_toolbar","0")}});e("#vcc_prefs_paste").on("change",function(c){if(this.checked){localStorage.setItem("vcc_prefs_paste","1");e("#vcc_toolbar_paste").hide()}else{localStorage.setItem("vcc_prefs_paste","0");e("#vcc_toolbar_paste").show()}});e("#vcc_prefs_impex").on("change",function(c){if(this.checked){localStorage.setItem("vcc_prefs_impex","1");e("#vcc_toolbar_impex").hide()}else{localStorage.setItem("vcc_prefs_impex","0");e("#vcc_toolbar_impex").show()}});e("#vcc_prefs_gc").on("change",function(c){if(this.checked){localStorage.setItem("vcc_prefs_gc","1");e("#vcc_toolbar_gc_load").hide();e("#vcc_toolbar_gc_save").hide()}else{localStorage.setItem("vcc_prefs_gc","0");e("#vcc_toolbar_gc_load").show();e("#vcc_toolbar_gc_save").show()}});e("#vcc_prefs_license").on("change",function(c){if(this.checked){localStorage.setItem("vcc_prefs_license","1");e("#vcc_toolbar_license").hide()}else{localStorage.setItem("vcc_prefs_license","0");e("#vcc_toolbar_license").show()}});e(".vcc_oc_button").on("click",function(c){if(e(this).hasClass("o")){e(this).removeClass("o");e(this).addClass("c");e("#vcc_toolbar").hide()}else{e(this).removeClass("c");e(this).addClass("o");e("#vcc_toolbar").show()}});e(".vcc_paste_top").on("click",function(c){c.preventDefault();var t=-1;if(r(null)){window.vcc_total_count=0;window.vcc_current_count=0;e("#vcc_paste_indicator").show();setTimeout(function(){for(var c=1;c<=window.vcc_cb_count;c++){vcc_elements=JSON.parse(localStorage.getItem("vcc_elements"+c));window.vcc_total_count+=vcc_elements.length}window.vcc_total_count=window.vcc_total_count+parseInt(window.vcc_cb_count);for(var c=1;c<=window.vcc_cb_count;c++){t=v(null,c,t)}e("#vcc_paste_indicator").hide()},100)}});e(".vcc_input, #vcc_name, #vcc_username, #vcc_api_key, #vcc_license_key").keypress(function(c){if(c&&c.which===e.ui.keyCode.ENTER){c.preventDefault()}});e(".vcc_number_reset_top").on("click",function(e){e.preventDefault();l()});e(".vcc_import").on("click",function(c){c.preventDefault();if(e(".vcc_input").val()){s(e(".vcc_input").val())}});e(".vcc_export").on("click",function(c){c.preventDefault();if(window.vcc_cb_count>0){var t="[";for(var o=1;o<=window.vcc_cb_count;o++){t+='{"vcc_element_sc":"'+window.btoa(encodeURIComponent(localStorage.getItem("vcc_element_sc"+o)))+'",';t+='"vcc_element_params":"'+window.btoa(encodeURIComponent(localStorage.getItem("vcc_element_params"+o)))+'",';t+='"vcc_elements":"'+window.btoa(encodeURIComponent(localStorage.getItem("vcc_elements"+o)))+'"},'}t=t.substring(0,t.length-1);t+="]";e(".vcc_input").val(window.btoa(encodeURIComponent(t)));e(".vcc_input").select()}});e(".vcc_gc_load").on("click",function(c){c.preventDefault();if(e(".vcc_load_dialog").css("visibility")=="visible"){e(".vcc_load_dialog").css("visibility","hidden");return false}username=localStorage.getItem("vcc_username");license_key=localStorage.getItem("vcc_license_key");if(username!=null&&license_key!=null){e(".vcc_dialog").css("visibility","hidden");e(".vcc_load_dialog").css("visibility","visible");e(".vcc_load_dialog .vcc_list").html("");e(".vcc_load_dialog .vcc_loader").show();e.ajax({url:"https://focal-legacy-814.appspot.com/load_list",data:{username:username,license_key:license_key},error:function(){e(".vcc_load_dialog").css("visibility","hidden");alert("Error 01. Please try later.")},dataType:"jsonp",success:function(c){e(".vcc_load_dialog .vcc_loader").hide();if(c=="error"){e(".vcc_load_dialog").css("visibility","hidden");alert("Error 02. Please try later.")}else{if(c.length==0){e(".vcc_load_dialog").css("visibility","hidden");alert("No saved templates.")}else{for(i=0;i<c.length;i++){e(".vcc_load_dialog .vcc_list").append('<div class="vcc_list_item_container"><div class="vcc_list_item" title="Load '+c[i].name+' "data-item="'+c[i].name+'">'+c[i].name+'</div><div class="vcc_list_item_delete" title="Delete '+c[i].name+'" data-item="'+c[i].name+'"></div></div>')}a()}}},type:"GET"})}else{o();e(".vcc_dialog").css("visibility","hidden");e("#vcc_toolbar_license").show();e(".vcc_activate_dialog").css("visibility","visible")}});e(".vcc_gc_save").on("click",function(c){c.preventDefault();if(e(".vcc_save_dialog").css("visibility")=="visible"){e(".vcc_save_dialog").css("visibility","hidden");return false}username=localStorage.getItem("vcc_username");license_key=localStorage.getItem("vcc_license_key");if(username!=null&&license_key!=null){e(".vcc_dialog").css("visibility","hidden");e(".vcc_save_dialog").css("visibility","visible")}else{o();e(".vcc_dialog").css("visibility","hidden");e("#vcc_toolbar_license").show();e(".vcc_activate_dialog").css("visibility","visible")}});e(".vcc_save_submit").on("click",function(c){c.preventDefault();username=localStorage.getItem("vcc_username");license_key=localStorage.getItem("vcc_license_key");name=e("#vcc_name").val();if(name==""){alert("Enter template name.");return false}if(window.vcc_cb_count>0){var t="[";for(var a=1;a<=window.vcc_cb_count;a++){t+='{"vcc_element_sc":"'+window.btoa(encodeURIComponent(localStorage.getItem("vcc_element_sc"+a)))+'",';t+='"vcc_element_params":"'+window.btoa(encodeURIComponent(localStorage.getItem("vcc_element_params"+a)))+'",';t+='"vcc_elements":"'+window.btoa(encodeURIComponent(localStorage.getItem("vcc_elements"+a)))+'"},'}t=t.substring(0,t.length-1);t+="]";clipboard=window.btoa(encodeURIComponent(t));if(username!=null&&license_key!=null){e(".vcc_save_submit").hide();e(".vcc_save_cancel").hide();e(".vcc_save_dialog .vcc_loader").show();e.ajax({url:"https://focal-legacy-814.appspot.com/save",data:{username:username,license_key:license_key,clipboard:clipboard,name:name},error:function(){e(".vcc_save_submit").show();e(".vcc_save_cancel").show();e(".vcc_save_dialog .vcc_loader").hide();alert("Error 03. Please try later.")},dataType:"json",success:function(c){e(".vcc_save_submit").show();e(".vcc_save_cancel").show();e(".vcc_save_dialog .vcc_loader").hide();if(c=="ok"){e("#vcc_name").val("");e(".vcc_save_dialog").css("visibility","hidden");alert("Clipboard template saved.")}else if(c=="exists"){alert("Name already taken.")}else{alert("Error 04. Please try later.")}},type:"POST"})}else{o();e(".vcc_activate_dialog").css("visibility","visible")}}else{alert("Nothing to save.")}});e(".vcc_save_cancel").on("click",function(c){c.preventDefault();e(".vcc_save_dialog").css("visibility","hidden")});e(".vcc_gc_settings").on("click",function(c){c.preventDefault();if(e(".vcc_activate_dialog").css("visibility")=="visible"){e(".vcc_activate_dialog").css("visibility","hidden");return false}o();e(".vcc_dialog").css("visibility","hidden");e(".vcc_activate_dialog").css("visibility","visible")});e(".vcc_gc_settings_submit").on("click",function(c){c.preventDefault();username=e("#vcc_username").val();api_key=e("#vcc_api_key").val();license_key=e("#vcc_license_key").val();if(username!=null&&api_key!=null&&license_key!=null){e(".vcc_gc_settings_submit").hide();e(".vcc_gc_settings_cancel").hide();e(".vcc_activate_dialog .vcc_loader").show();e.ajax({url:"https://focal-legacy-814.appspot.com/activate",data:{username:username,api_key:api_key,license_key:license_key},error:function(){e(".vcc_gc_settings_submit").show();e(".vcc_gc_settings_cancel").show();e(".vcc_activate_dialog .vcc_loader").hide();alert("Error 05. Please try later.")},dataType:"jsonp",success:function(c){e(".vcc_gc_settings_submit").show();e(".vcc_gc_settings_cancel").show();e(".vcc_activate_dialog .vcc_loader").hide();if(c=="ok"){localStorage.setItem("vcc_username",username);localStorage.setItem("vcc_license_key",license_key);e(".vcc_activate_dialog").css("visibility","hidden");alert("Visual Composer Clipboard is now activated!")}else{alert("Error 06. Please try later.")}},type:"GET"})}else{o();e(".vcc_activate_dialog").css("visibility","visible")}});e(".vcc_gc_settings_cancel").on("click",function(c){c.preventDefault();e(".vcc_activate_dialog").css("visibility","hidden")});e(".vcc_prefs").on("click",function(c){c.preventDefault();if(e(".vcc_prefs_dialog").css("visibility")=="visible"){e(".vcc_prefs_dialog").css("visibility","hidden");return false}o();e(".vcc_dialog").css("visibility","hidden");e(".vcc_prefs_dialog").css("visibility","visible")})};var o=function(){username=localStorage.getItem("vcc_username")!=null?localStorage.getItem("vcc_username"):"";license_key=localStorage.getItem("vcc_license_key")!=null?localStorage.getItem("vcc_license_key"):"";e("#vcc_username").val(username);e("#vcc_license_key").val(license_key)};var a=function(){e(".vcc_list_item").on("click",function(c){var t=e(this).data("item");e(".vcc_dialog").css("visibility","hidden");e(".vcc_load_dialog").css("visibility","visible");e(".vcc_load_dialog .vcc_list").html("");e(".vcc_load_dialog .vcc_loader").show();e.ajax({url:"https://focal-legacy-814.appspot.com/load_item",data:{username:localStorage.getItem("vcc_username"),license_key:localStorage.getItem("vcc_license_key"),item_to_load:t},error:function(){e(".vcc_load_dialog").css("visibility","hidden");alert("Error 07. Please try later.")},dataType:"jsonp",success:function(c){e(".vcc_load_dialog .vcc_loader").hide();e(".vcc_load_dialog").css("visibility","hidden");if(c=="error"){alert("Error 08. Please try later.")}else{s(c)}},type:"GET"})});e(".vcc_list_item_delete").on("click",function(c){var t=e(this).data("item");e(".vcc_dialog").css("visibility","hidden");e(".vcc_load_dialog").css("visibility","visible");e(".vcc_load_dialog .vcc_list").html("");e(".vcc_load_dialog .vcc_loader").show();e.ajax({url:"https://focal-legacy-814.appspot.com/load_list",data:{username:localStorage.getItem("vcc_username"),license_key:localStorage.getItem("vcc_license_key"),item_to_delete:t},error:function(){e(".vcc_load_dialog").css("visibility","hidden");alert("Error 09. Please try later.")},dataType:"jsonp",success:function(c){e(".vcc_load_dialog .vcc_loader").hide();if(c=="error"){e(".vcc_load_dialog").css("visibility","hidden");alert("Error 10. Please try later.")}else{if(c.length==0){e(".vcc_load_dialog").css("visibility","hidden")}else{for(i=0;i<c.length;i++){e(".vcc_load_dialog .vcc_list").append('<div class="vcc_list_item_container"><div class="vcc_list_item" title="Load '+c[i].name+' "data-item="'+c[i].name+'">'+c[i].name+'</div><div class="vcc_list_item_delete" title="Delete '+c[i].name+'" data-item="'+c[i].name+'"></div></div>')}a()}}},type:"GET"})})};var s=function(c){var t=decodeURIComponent(window.atob(c));var o=JSON.parse(t);for(i=1;i<=o.length;i++){localStorage.setItem("vcc_element_sc"+i,decodeURIComponent(window.atob(o[i-1].vcc_element_sc)));localStorage.setItem("vcc_element_params"+i,decodeURIComponent(window.atob(o[i-1].vcc_element_params)));localStorage.setItem("vcc_elements"+i,decodeURIComponent(window.atob(o[i-1].vcc_elements)));window.vcc_cb_count=o.length;localStorage.setItem("vcc_cb_count",""+window.vcc_cb_count);e("span.vcc_number_reset").html(window.vcc_cb_count);e(".vcc_number_reset_top").html(window.vcc_cb_count)}};var l=function(){var c=confirm("Clear clipboard?");if(c==true){if(window.vcc_cb_count>0){for(var t=1;t<=window.vcc_cb_count;t++){localStorage.removeItem("vcc_element_sc"+t);localStorage.removeItem("vcc_element_params"+t);localStorage.removeItem("vcc_elements"+t)}}localStorage.setItem("vcc_cb_count","0");e("span.vcc_number_reset").html("0");e(".vcc_number_reset_top").html("0");window.vcc_cb_count=0}};var n=function(e,c){pid=e.attributes.parent_id;if(c==0){pid=0}window.vcc_elements.push({sc:e.get("shortcode"),params:JSON.stringify(e.get("params")),parent_id:pid,id:e.id,order:e.get("order")});_.each(window.vc.shortcodes.where({parent_id:e.id}),function(e){n(e,-1)})};var r=function(c){if(c!=null){id_this=e(c).closest("div[data-element_type]").attr("data-model-id");model_this=window.vc.app.views[id_this].model;shortcode_this=model_this.get("shortcode")}else{shortcode_this=""}sc=localStorage.getItem("vcc_element_sc1");if(shortcode_this=="vc_row"&&sc!="vc_row"){alert("Can't paste "+sc+" after vc_row!");return false}else if(shortcode_this=="vc_row_inner"&&sc=="vc_row"){alert("Can't paste vc_row after vc_row_inner!");return false}else if(shortcode_this=="vc_column"&&sc=="vc_row"){alert("Can't paste vc_row inside vc_column!");return false}else if(shortcode_this==""&&sc=="vc_row_inner"){alert("Can't paste vc_row_inner as root element!\n\nYou can only paste it inside a column.");return false}else if(shortcode_this==""&&sc=="vc_column"){alert("Can't paste vc_column content to root!\n\nYou can only paste it inside a column.");return false}else if(shortcode_this==""&&sc!="vc_row"){alert("Can't paste "+sc+" to root!\n\nYou can only paste it inside a column.");return false}else if(shortcode_this=="vc_row"&&sc=="vc_column"){alert("Can't paste vc_column content after vc_row!\n\nYou can only paste it inside a column.");return false}else if(shortcode_this=="vc_row_inner"&&sc=="vc_column"){alert("Can't paste vc_column content after vc_row_inner!\n\nTry column Paste command.");return false}return true};var v=function(c,t,o){parent_id=false;if(c!=null){id_this=c.attr("data-model-id");model_this=window.vc.app.views[id_this].model;shortcode_this=model_this.get("shortcode")}else{shortcode_this=""}if(shortcode_this!="vc_row"){parent_id=e(c).closest('div[data-element_type="vc_column"]').attr("data-model-id")}if(c!=null&&shortcode_this!="vc_column"){vc.clone_index=vc.clone_index/10;if(o===-1)o=e(c).closest('div[data-element_type="'+shortcode_this+'"]').attr("data-model-id");model=window.vc.app.views[o].model;new_order=parseFloat(model.get("order"))+vc.clone_index}else{new_order=-1}sc=localStorage.getItem("vcc_element_sc"+t);var a=false;if(!(shortcode_this=="vc_column"&&t==1&&sc=="vc_column")){params=JSON.parse(localStorage.getItem("vcc_element_params"+t));row_id=vc_guid();if(new_order==-1){window.vc.shortcodes.create({shortcode:sc,id:row_id,parent_id:parent_id,cloned:false,params:params})}else{window.vc.shortcodes.create({shortcode:sc,id:row_id,parent_id:parent_id,order:new_order,cloned:false,params:params})}window.vcc_current_count++;if(sc!="vc_row"&&sc!="vc_column"&&sc!="vc_row_inner"){_.each(window.vc.shortcodes.where({parent_id:row_id}),function(c){window.vc.app.views[c.id].model.destroy();if(c.attributes.shortcode=="vc_tab"){e("[data-model-id="+row_id+"] [href=#tab-"+c.attributes.params.tab_id+"]").parent().remove()}})}}else{row_id=parent_id;a=true}vcc_elements=JSON.parse(localStorage.getItem("vcc_elements"+t));uid=(new Date).getTime()+t;_.each(vcc_elements,function(e){e.id=e.id+uid;if(e.parent_id==0){e.parent_id=row_id}else{e.parent_id=e.parent_id+uid}});_.each(vcc_elements,function(c){params=JSON.parse(c.params);if(params.tab_id!=undefined){params.tab_id=params.tab_id+uid}if(a){new_sc=window.vc.shortcodes.create({shortcode:c.sc,id:c.id,parent_id:c.parent_id,cloned:false,params:params})}else{new_sc=window.vc.shortcodes.create({shortcode:c.sc,id:c.id,parent_id:c.parent_id,order:c.order,cloned:false,params:params})}_.each(window.vc.shortcodes.where({parent_id:c.id}),function(c){window.vc.app.views[c.id].model.destroy();if(c.attributes.shortcode=="vc_tab"){e("[data-model-id="+row_id+"] [href=#tab-"+c.attributes.params.tab_id+"]").parent().remove()}});window.vcc_current_count++});e("ul.tabs_controls").each(function(){e(this).prependTo(e(this).parent())});return row_id}})(jQuery);